import{A as q,s as k}from"./AnimeListButton.BaSlC_8o.js";import{_ as E}from"./_plugin-vue_export-helper.DbbboyIR.js";import{p as _,q as r,r as R,s as F,t as s,u as N,v as x,w as l,x as M,F as L,y as z,z as B,A as j,B as w,C as P}from"./runtime-core.esm-bundler.DqDjC33v.js";import{g as y}from"./index.CH_iu5NA.js";import{F as f}from"./Flip.C5anRBLt.js";import"./runtime-dom.esm-bundler.BZRa_mre.js";const U={__name:"AnimeCardReactive",props:{anime:{type:Object,required:!0},className:{type:String,default:""},session:{type:Object,default:null},showStatus:{type:Boolean,default:!1}},emits:["reload"],setup(h,{expose:c,emit:e}){c();const t=h,u=e,i=l(null),o={props:t,emits:u,imageContainer:i,onImageLoad:g=>{const p=g.target;p.style.opacity="1",i.value&&i.value.classList.remove("animate-pulse","bg-zinc-700")},handleEmitUpdateStatus:()=>{u("reload")},ref:l,AnimeListButton:q};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},D=["id"],I=["href"],T={class:"relative w-full h-full rounded-xl overflow-hidden bg-zinc-700 animate-pulse",ref:"imageContainer"},W=["src","alt"],V={class:"hidden group-hover:flex transition-all duration-1000 absolute top-0 z-3 left-0 w-full h-full background-blur-sm p-8 flex-col rounded-xl"},G={class:"flex flex-col flex-1"},H={class:"text-2xl text-white font-bold mb-1"},J={class:"text-sm font-semibold mb-3 text-yellow-400"},K={class:"text-sm text-zinc-200 font-medium"};function Q(h,c,e,t,u,i){return r(),_("article",{class:"w-full h-full relative",id:`anime-card-${e.anime.id}`},[e.session?(r(),R(t.AnimeListButton,{key:0,session:e.session,"anime-id":e.anime.id,"show-status":e.showStatus,class:N(`absolute z-50 ${e.showStatus?"top-0 left-0 w-full p-2":"top-2 right-2"}`),onUpdateStatus:t.handleEmitUpdateStatus},null,8,["session","anime-id","show-status","class"])):F("",!0),s("a",{href:`/animes/${e.anime.id}`,class:"overflow-hidden relative group cursor-pointer"},[s("div",T,[s("img",{src:e.anime.image_src,alt:e.anime.title,loading:"lazy",class:"w-full h-full object-cover rounded-xl opacity-0 transition-opacity duration-500",onLoad:t.onImageLoad},null,40,W)],512),s("div",V,[s("div",G,[s("h5",H,x(e.anime.title),1),s("span",J," â˜† "+x(e.anime.imdb_rate||"N/A"),1),s("p",K,x(e.anime.overview),1)])])],8,I)],8,D)}const X=E(U,[["render",Q]]),Y={__name:"MyAnimeList",props:{session:{type:Object,required:!0}},setup(h,{expose:c}){c();const e=h,t=l("grid"),u=["all",...k],i=l("all"),d=l([]),a=l(null),o=l(null),g=B(()=>i.value==="all"?d.value:d.value.filter(n=>n.status===i.value)),p=async()=>{try{const v=await(await fetch("/api/users_animes.json")).json();d.value=v}catch(n){console.error("Error al obtener la lista de animes:",n)}},b=n=>{if(!o.value||!a.value)return;const v=f.getState(o.value),m=n.getBoundingClientRect(),C=a.value.getBoundingClientRect();y.set(o.value,{width:m.width,height:m.height,x:m.left-C.left,y:m.top-C.top}),f.from(v,{duration:.1,ease:"power2.out"})},S=l(null),O=async(n,v)=>{const m=f.getState(S.value);i.value=n,await w(),f.from(m,{duration:.3,ease:"power2.out",absolute:!0,stagger:.02}),b(v.currentTarget)};j(async()=>{y.registerPlugin(f),await p(),await w();const n=a.value.querySelector(".nav-status.font-bold");n&&b(n)});const A={props:e,viewType:t,statusesWithAll:u,selectedStatus:i,userAnimeList:d,navContainer:a,marker:o,filteredAnimeList:g,fetchAnimeList:p,updateMarkerPosition:b,cardsContainer:S,selectStatus:O,ref:l,computed:B,onMounted:j,nextTick:w,get statuses(){return k},AnimeCardReactive:X,get gsap(){return y},get Flip(){return f}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},Z={class:"flex flex-col px-8 mb-8"},$={ref:"navContainer",class:"flex mb-6 border border-zinc-700 rounded-xl overflow-hidden max-w-fit mx-auto relative"},ee={ref:"marker",class:"marker-status absolute bg-white/40 rounded-xl z-10 transition-all duration-300 pointer-events-none"},te=["onClick"],se={key:0,ref:"cardsContainer",class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},ae={class:"my-10 flex flex-col items-center"};function ne(h,c,e,t,u,i){const d=P('else"');return r(),_("section",Z,[s("div",$,[s("div",ee,null,512),(r(),_(L,null,z(t.statusesWithAll,(a,o)=>s("div",{key:o},[s("button",{type:"button",class:N(["nav-status text-white text-base font-medium px-6 py-3 capitalize w-full cursor-pointer transition-colors",{"font-bold":t.selectedStatus===a}]),onClick:g=>t.selectStatus(a,g)},x(a==="all"?"All":a),11,te)])),64))],512),t.filteredAnimeList.length>0?(r(),_("div",se,[(r(!0),_(L,null,z(t.filteredAnimeList,(a,o)=>(r(),R(t.AnimeCardReactive,{key:a.anime.id,anime:a.anime,session:e.session,showStatus:!0,onReload:t.fetchAnimeList},null,8,["anime","session"]))),128))],512)):F("",!0),M((r(),_("div",ae,c[0]||(c[0]=[s("p",{class:"text-white text-center text-lg mb-4"},"No animes found.",-1),s("a",{href:"/animes",class:"flex justify-center items-center gap-2 bg-white hover:bg-zinc-200 text-black text-base font-semibold px-6 py-3 rounded-xl cursor-pointer select-none","data-astro-prefetch":""}," Explore now ",-1)]))),[[d]])])}const ue=E(Y,[["render",ne]]);export{ue as default};
