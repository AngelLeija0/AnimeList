---
import Layout from "@/layouts/Layout.astro";
import Main from "@/components/Main.astro";
import AnimeService from "@/data/AnimeService";

const { id } = Astro.params;

const anime = await AnimeService.getById(id);
if (!anime) return Astro.redirect("/");

export async function getStaticPaths() {
const animes = await AnimeService.get({ size: 5000 });

  return animes.map((anime) => ({
    params: { id: anime.id },
  }));
}

export const prerender = true;
---

<Layout>
  <Main className="mt-24 max-w-300 mx-auto">
    <img src={anime.image_src} transition:name={`anime-image-${anime.id}`} class="w-auto h-80 object-contain object-left mb-4" />
    <h1 class="text-3xl font-bold">{anime.title}</h1>
    <p class="text-zinc-600 mt-2">{anime.overview}</p>
    <p class="text-yellow-400 font-semibold">â˜… {anime.imdb_rate}</p>
  </Main>
</Layout>
